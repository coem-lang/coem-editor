{"mappings":"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","sources":["src/js/scripts.js"],"sourcesContent":["import { view } from './codemirror/setup.js';\n\nconst navToggle = document.querySelector(\".navToggle\"),\n  nav = document.querySelector(\".nav\"),\n  menuHeaderBtns = document.querySelectorAll(\".nav__item > button\"),\n  menuBtns = document.querySelectorAll(\".nav__dropdown-item > button\"),\n  filenameTitle = document.querySelector(\".filename-title\"),\n  exampleBtns = document.querySelectorAll(\".example-item button\"),\n  regex = document.querySelector(\".regex\");\nlet isMenuOpen = false;\n\n// MENU HEADERS\n\nfunction onMenuHeaderClick(e) {\n  e.preventDefault();\n  let btn = e.currentTarget;\n  isMenuOpen = btn.parentElement.classList.toggle(\"nav__item--open\");\n}\n\nfunction onMenuHeaderMouseover(e) {\n  e.preventDefault();\n  let btn = e.currentTarget;\n  if (isMenuOpen) {\n    for (let b of menuHeaderBtns) {\n      b.parentElement.classList.remove(\"nav__item--open\");\n    }\n    btn.parentElement.classList.add(\"nav__item--open\");\n    btn.focus();\n  }\n}\n\nfunction onMenuHeaderBlur(e) {\n  // e.preventDefault();\n  // let btn = e.currentTarget;\n  // btn.parentElement.classList.remove(\"nav__item--open\");\n}\n\n// MENU BTNS\n\nfunction onMenuBtnClick(e) {\n  e.preventDefault();\n  isMenuOpen = false;\n  let btn = e.currentTarget;\n  btn.parentElement.parentElement.parentElement.classList.remove(\"nav__item--open\");\n}\n\nfunction newFile() {\n  setDoc(\"\");\n  filenameTitle.innerText = \"Untitled\";\n}\n\nfunction loadExample(e) {\n  let filename = e.target.value;\n  load(filename);\n}\n\nfunction load(filename) {\n  fetch(\"./examples/\" + filename + \".coem\")\n  .then(r => r.text())\n  .then((code) => {\n    setDoc(code);\n    filenameTitle.innerText = filename;\n  })\n  .catch(err => console.log(err));\n}\n\nfunction openPopup(e) {\n  regex.classList.add(\"visible\");\n}\n\nfunction closePopup(e) {\n  regex.classList.remove(\"visible\");\n}\n\n// REFLECT\n\nfunction handleError(e, source = \"\") {\n  if (!e) return null;\n  console.error(e);\n  const { oneLiner, preErrorSection, errorSection, postErrorSection } = formatCoemError(e, source);\n  let errorStr = oneLiner;\n  if (errorSection) {\n    errorStr += '<br />';\n    errorStr += `${preErrorSection}<span class=\"error\">${errorSection}</span>${postErrorSection}`;\n  }\n}\n\nfunction reflect() {\n  // https://github.com/danman113/YALI.js/blob/master/browser.js\n  const source = view.state.doc.toString();\n  console.log(source);\n  const browserEnv = new Environment();\n  output = \"\";\n  try {\n    // run(source, browserEnv, handleOutput);\n    run(source, browserEnv);\n    handleError(null);\n  } catch (e) {\n    handleError(e, source);\n  }\n}\n\n// CHARACTER INPUT\n\nfunction insert(str) {\n  view.dispatch(view.state.replaceSelection(str));\n  view.focus();\n}\n\nfunction setDoc(str) {\n  view.dispatch({ changes: { from: 0, to: view.state.doc.length, insert: str } });\n  view.focus();\n}\n\n// MAIN\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  load(\"Reminder\");\n\n  // nav\n  navToggle.addEventListener(\"click\", e => {\n    e.preventDefault();\n    if (nav.classList.toggle(\"open\")) {\n      navToggle.innerText = \"×\";\n    } else {\n      navToggle.innerText = \"☰\";\n    }\n    document.body.classList.toggle(\"navIsOpen\");\n  });\n\n  // menu headers\n  menuHeaderBtns.forEach(btn => {\n    btn.addEventListener(\"click\", onMenuHeaderClick);\n    btn.addEventListener(\"mouseover\", onMenuHeaderMouseover);\n    btn.addEventListener(\"blur\", onMenuHeaderBlur);\n  });\n\n  // menu buttons\n  menuBtns.forEach(btn => {\n    btn.addEventListener(\"click\", onMenuBtnClick);\n  })\n\n  // new\n  document.querySelector(\"#newBtn\").addEventListener(\"click\", newFile);\n  \n  // examples\n  exampleBtns.forEach(btn => {\n    btn.addEventListener(\"click\", loadExample);\n  });\n\n  // regex\n  document.querySelector(\"#regexBtn\").addEventListener(\"click\", openPopup);\n  document.querySelector(\".backdrop\").addEventListener(\"click\", closePopup);\n\n  // reflect\n  document.querySelector(\"#reflectBtn\").addEventListener(\"click\", reflect);\n\n  // character input\n  document.querySelector(\"#clearBtn\").addEventListener(\"click\", () => setDoc(\"\"));\n  document.querySelector(\"#commentBtn\").addEventListener(\"click\", () => insert(\"† \"));\n  document.querySelector(\"#dashBtn\").addEventListener(\"click\", () => insert(\"—\"));\n  document.querySelector(\"#colonBtn\").addEventListener(\"click\", () => insert(\":\"));\n  document.querySelector(\"#ampersandBtn\").addEventListener(\"click\", () => insert(\"&\"));\n  document.querySelector(\"#openQuoteBtn\").addEventListener(\"click\", () => insert(\"“\"));\n  document.querySelector(\"#closeQuoteBtn\").addEventListener(\"click\", () => insert(\"”\"));\n  document.querySelector(\"#pipeBtn\").addEventListener(\"click\", () => insert(\"|\"));\n  document.querySelector(\"#openParenBtn\").addEventListener(\"click\", () => insert(\"(\"));\n  document.querySelector(\"#closeParenBtn\").addEventListener(\"click\", () => insert(\")\"));\n  document.querySelector(\"#questionBtn\").addEventListener(\"click\", () => insert(\"?\"));\n  document.querySelector(\"#asteriskBtn\").addEventListener(\"click\", () => insert(\"*\"));\n  document.querySelector(\"#plusBtn\").addEventListener(\"click\", () => insert(\"+\"));\n});\n\ndocument.addEventListener(\"keydown\", e => {\n  if (e.code === \"Escape\" && regex.classList.contains(\"visible\")) {\n    regex.classList.remove(\"visible\");\n  }\n});"],"names":["$8BrLS","parcelRequire","$c5788eb2e609bbc3$var$navToggle","document","querySelector","$c5788eb2e609bbc3$var$nav","$c5788eb2e609bbc3$var$menuHeaderBtns","querySelectorAll","$c5788eb2e609bbc3$var$menuBtns","$c5788eb2e609bbc3$var$filenameTitle","$c5788eb2e609bbc3$var$exampleBtns","$c5788eb2e609bbc3$var$regex","$c5788eb2e609bbc3$var$isMenuOpen","$c5788eb2e609bbc3$var$onMenuHeaderClick","e","preventDefault","btn","currentTarget","parentElement","classList","toggle","$c5788eb2e609bbc3$var$onMenuHeaderMouseover","b","remove","add","focus","$c5788eb2e609bbc3$var$onMenuHeaderBlur","$c5788eb2e609bbc3$var$onMenuBtnClick","$c5788eb2e609bbc3$var$newFile","$c5788eb2e609bbc3$var$setDoc","innerText","$c5788eb2e609bbc3$var$loadExample","$c5788eb2e609bbc3$var$load","target","value","filename","fetch","then","r","text","code","catch","err","console","log","$c5788eb2e609bbc3$var$openPopup","$c5788eb2e609bbc3$var$closePopup","$c5788eb2e609bbc3$var$handleError","source","error","oneLiner","preErrorSection","errorSection","postErrorSection","formatCoemError","errorStr","$c5788eb2e609bbc3$var$reflect","view","state","doc","toString","browserEnv","Environment","output","run","$c5788eb2e609bbc3$var$insert","str","dispatch","replaceSelection","changes","from","to","length","insert","addEventListener","body","forEach","contains"],"version":3,"file":"index.968cb38b.js.map"}